'use strict';function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function');}var AI=function(){function b(b){var c=arguments.length<=1||void 0===arguments[1]||arguments[1];return d(b,a)?h.calculateValue(a.board,a.aiCharacter,a.aiCharacter,c).move:void console.log('AI: Action cannot be returned: invalid data passed to function!');}function c(b){var c=arguments.length<=1||void 0===arguments[1]||arguments[1];return d(b,a)?h.calculateValue(a.board,a.aiCharacter,a.aiCharacter,c).board:void console.log('AI: Board cannot be returned: invalid data passed to function!');}function d(a,b){return(b.aiCharacter=e.aiCharacter(a.aiCharacter))?(b.playerCharacter=e.playerCharacter(a.playerCharacter,a.aiCharacter))?(b.startingCharacter=e.startingCharacter(a.startingCharacter))?!!(b.board=e.board(a.board,a.startingCharacter,a.aiCharacter))||(console.log('AI: Initialization aborted: board initialization error!'),!1):(console.log('AI: Initialization aborted: Starting character initialization error!'),!1):(console.log('AI: Initialization aborted: Player character initialization error!'),!1):(console.log('AI: Initialization aborted: AI character initialization error!'),!1);}var a={},e=function(){var a=function(b){return'undefined'==typeof b?(console.log('AI ERROR: ai character is undefined!'),!1):(b=b.toLowerCase(),'x'!==b&&'o'!==b?(console.log('AI ERROR: \''+b+'\' is not valid ai character!'),!1):b);},b=function(b,c){return'undefined'==typeof b?(console.log('AI ERROR: player character is undefined!'),!1):(b=b.toLowerCase(),'x'!==b&&'o'!==b?(console.log('AI ERROR: \''+b+'\' is not valid player character!'),!1):b===c?(console.log('AI ERROR: Player character \''+b+'\' cannot be the same as ai character \''+c+'\' !'),!1):b);},c=function(b){return'undefined'==typeof b?(console.log('AI ERROR: starting character is undefined!'),!1):(b=b.toLowerCase(),'x'!==b&&'o'!==b?(console.log('AI ERROR: \''+b+'\' is not valid starting character!'),!1):b);},d=function(b,c,d){if('undefined'==typeof b)return console.log('AI ERROR: board is not defined'),!1;if(!Array.isArray(b))return console.log('AI ERROR: passed board argument is not type of array'),!1;if(9!==b.length)return console.log('AI ERROR: length of board array is not valid, expected value is 9, given value is '+b.length),!1;if(b.forEach(function(a,c){b[c]=a.toLowerCase();}),e(b))return console.log('AI ERROR: board array contains invalid character !'),!1;var h=g(b,d),i=g(b,'o'===d?'x':'o');return h>i||h===i&&c!==d?(console.log('AI ERROR: It is not ai\'s turn!'),!1):i>h&&c===d?(console.log('AI ERROR: Given board contains too few ai\' moves'),!1):i-1>h?(console.log('AI ERROR: Given board contains too few player\' moves'),!1):f.isTerminate(b,!0)?(console.log('AI ERROR: Given board represents terminated game!'),!1):b;},e=function(b){var c=!1;return b.forEach(function(a){'e'!==a&&'x'!==a&&'o'!==a&&(c=!0);}),c;},g=function(b,c){return b.reduce(function(a,b){return b===c?++a:a;},0);};return{aiCharacter:a,playerCharacter:b,startingCharacter:c,board:d};}(),f=function(){var a=function(b){for(var c=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],e=['x','o'],f=0;f<2;++f)if(d(e[f],b))return!!c||e[f]+'-won';for(var g=0;g<9;++g)if('e'===b[g])return!c&&'not-end';return!!c||'draw';},b=function(b,c,d){return b===c+'-won'?10-d:'draw'===b?0:d-10;},c=function(b){var c=[];return b.forEach(function(a,b){'e'===a&&c.push(b);}),c;},d=function(b,c){for(var d=0;d<3;++d)if(b===c[d]&&b===c[d+3]&&b===c[d+6])return!0;for(var e=0;e<=6;e+=3)if(b===c[e]&&b===c[e+1]&&b===c[e+2])return!0;return b===c[0]&&b===c[4]&&b==c[8]||b===c[2]&&b===c[4]&&b==c[6];},e=function(b,c,d){var e=[];return b.forEach(function(a){e.push(a);}),e[c]=d,e;};return{isTerminate:a,getGameScore:b,getAllMoves:c,getBoardAfterSimulatedMove:e};}(),g=function a(b){_classCallCheck(this,a),this.move=b,this.boardAfterMove=[],this.score=-1e3;},h=function(){var a=function a(d,e,h,i){var j=arguments.length<=4||void 0===arguments[4]?0:arguments[4],k=f.isTerminate(d);if('not-end'!==k){var l=new g(-1);return l.score=f.getGameScore(k,h,j),l;}var m=f.getAllMoves(d),n=[];return m.forEach(function(b){var c=new g(b);c.board=f.getBoardAfterSimulatedMove(d,b,e),c.score=a(c.board,'x'===e?'o':'x',h,i,i?j+1:0).score,n.push(c);}),e===h?n.sort(b):n.sort(c),n[0];},b=function(b,c){return c.score-b.score;},c=function(b,c){return b.score-c.score;};return{calculateValue:a};}();return{getAIAction:b,isTerminate:function(b){return f.isTerminate(b,!0);},getStateOfGame:f.isTerminate,getBoardAfterAIMove:c};}();
